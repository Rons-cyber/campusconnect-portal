<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CampusConnect Portal</title>

<style>
:root {
  /* ðŸŽ¨ Purple Theme Palette */
  --primary: #6A0DAD;               /* Deep Purple */
  --secondary: #CBA6F7;             /* Light Lavender */
  --accent: #B266FF;                /* Vibrant Violet */
  --bg: #F3E8FF;                    /* Light Background */
  --text-dark: #2E0249;             /* Deep Purple-Black */
  --text-light: #F8F4FF;            /* Light Text */
  --gradient: linear-gradient(135deg, #6A0DAD, #B266FF);
  --border: #E2CFF9;                /* Soft Border */
}

/* General */
* { box-sizing: border-box; margin: 0; padding: 0; }
body {
  font-family: 'Segoe UI', Roboto, system-ui, sans-serif;
  background: var(--bg);
  color: var(--text-dark);
  transition: margin-left 0.3s ease;
  padding-bottom: 70px;
}

/* Header */
header {
  background: var(--gradient);
  color: var(--text-light);
  text-align: center;
  padding: 2.5rem 1rem 2rem;
  border-bottom-left-radius: 30px;
  border-bottom-right-radius: 30px;
  box-shadow: 0 4px 12px rgba(106, 13, 173, 0.25);
  position: relative;
}
header h1 { margin: 0; font-size: 2.3rem; letter-spacing: 1px; }
header p { margin-top: .5rem; font-size: 1rem; opacity: .9; }

/* Menu Button */
.menu-btn {
  position: absolute;
  top: 15px;
  left: 15px;
  background: white;
  color: var(--primary);
  border: none;
  border-radius: 50%;
  width: 38px;
  height: 38px;
  font-size: 1.3rem;
  font-weight: bold;
  cursor: pointer;
  box-shadow: 0 3px 10px rgba(0,0,0,0.15);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: 0.2s;
}
.menu-btn:hover {
  background: var(--accent);
  color: var(--text-light);
  transform: scale(1.05);
}

/* Sidebar */
.sidebar {
  height: 100%;
  width: 0;
  position: fixed;
  z-index: 10;
  top: 0;
  left: 0;
  background: var(--text-light);
  border-right: 2px solid var(--border);
  overflow-x: hidden;
  transition: 0.3s;
  padding-top: 80px;
  box-shadow: 3px 0 10px rgba(0,0,0,0.1);
}
.sidebar button {
  display: block;
  background: none;
  color: var(--primary);
  border: none;
  padding: 15px 25px;
  text-align: left;
  font-size: 1rem;
  width: 100%;
  cursor: pointer;
  transition: 0.2s;
}
.sidebar button:hover {
  background: var(--gradient);
  color: var(--text-light);
}
.close-btn {
  position: absolute;
  top: 20px;
  right: 25px;
  background: none;
  border: none;
  font-size: 1.8rem;
  color: var(--primary);
  cursor: pointer;
}

/* Main */
main { max-width: 950px; margin: auto; padding: 1rem; }
.card {
  background: white;
  padding: 1.3rem;
  border-radius: 16px;
  margin-bottom: 1.3rem;
  box-shadow: 0 3px 10px rgba(178, 102, 255, 0.15);
  border: 1px solid var(--border);
  transition: all 0.2s;
}
.card:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(106, 13, 173, 0.2);
}
input, select, textarea, button {
  width: 100%; margin-top: 6px; padding: 10px;
  border-radius: 10px; border: 1.5px solid var(--border);
  font-size: 1rem;
  color: var(--text-dark);
}
input:focus, select:focus, textarea:focus {
  border-color: var(--accent);
  outline: none;
  box-shadow: 0 0 4px rgba(178, 102, 255, 0.3);
}
button {
  background: var(--primary);
  color: var(--text-light);
  border: none;
  cursor: pointer;
  font-weight: 600;
  margin-top: 10px;
  transition: background 0.2s;
}
button:hover { background: var(--accent); }

.hidden { display: none; }
h2 {
  color: var(--primary);
  font-size: 1.5rem;
  margin-bottom: .8rem;
}
.list-item {
  border-bottom: 1px solid var(--border);
  padding: 8px 0;
}

/* Chat */
.chat-box {
  border: 1.5px solid var(--border);
  border-radius: 10px;
  height: 250px;
  overflow-y: auto;
  background: var(--secondary);
  padding: 8px;
  margin-bottom: 8px;
}
.chat-message { margin-bottom: 6px; }

/* Footer */
footer {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  text-align: center;
  padding: 10px 0;
  background: var(--text-light);
  border-top: 2px solid var(--border);
  font-size: .9rem;
  opacity: .9;
  box-shadow: 0 -2px 6px rgba(0,0,0,0.05);
}
footer span { color: var(--accent); }
footer b { color: var(--primary); }
</style>
</head>

<body>
<header>
  <button class="menu-btn" onclick="openMenu()">â˜°</button>
  <h1>CampusConnect Portal</h1>
  <p>Empowering Students, Alumni & Industry</p>
</header>

<div id="sidebar" class="sidebar">
  <button class="close-btn" onclick="closeMenu()">Ã—</button>
  <button onclick="showSection('loginSection')">Login</button>
  <button onclick="showSection('chatSection')">Chat Room</button>
  <button onclick="showSection('issueSection')">Issues</button>
  <button onclick="showSection('cgpaSection')">CGPA Calculator</button>
  <button onclick="showSection('facultySection')">Faculty</button>
  <button onclick="showSection('alumniSection')">Alumni</button>
  <button onclick="showSection('tournamentSection')">Tournaments</button>
</div>

<main>
  <!-- Login -->
  <section id="loginSection" class="card">
    <h2>Login / Register</h2>
    <input type="text" id="name" placeholder="Enter your name">
    <select id="role">
      <option value="student">Student</option>
      <option value="alumni">Alumni</option>
      <option value="faculty">Faculty</option>
      <option value="admin">Admin</option>
    </select>
    <button onclick="login()">Continue</button>
    <p id="welcomeMsg"></p>
  </section>

  <!-- Chat Room -->
  <section id="chatSection" class="card hidden">
    <h2>Chat Room</h2>
    <div id="chatBox" class="chat-box"></div>
    <input type="text" id="chatInput" placeholder="Type your message...">
    <button onclick="sendMessage()">Send</button>
  </section>

  <!-- Issues -->
  <section id="issueSection" class="card hidden">
    <h2>Report an Issue</h2>
    <textarea id="issueText" placeholder="Describe your issue..."></textarea>
    <button onclick="addIssue()">Submit Issue</button>
    <h3 style="margin-top:1rem;">Submitted Issues</h3>
    <div id="issueList"></div>
  </section>

  <!-- CGPA Calculator -->
  <section id="cgpaSection" class="card hidden">
    <h2>CGPA Calculator</h2>
    <div id="subjects"></div>
    <button onclick="addSubject()">+ Add Subject</button>
    <button onclick="calculateCGPA()">Calculate CGPA</button>
    <p id="cgpaResult"></p>
  </section>

  <!-- Faculty -->
  <section id="facultySection" class="card hidden">
    <h2>Faculty Directory</h2>
    <div id="facultyList"></div>
    <button id="addFacultyBtn" class="hidden" onclick="addFaculty()">+ Add Faculty</button>
  </section>

  <!-- Alumni -->
  <section id="alumniSection" class="card hidden">
    <h2>Alumni Directory</h2>
    <div id="alumniList"></div>
    <button id="addAlumniBtn" class="hidden" onclick="addAlumni()">+ Add Alumni</button>
  </section>

  <!-- Tournaments -->
  <section id="tournamentSection" class="card hidden">
    <h2>Tournaments</h2>
    <div id="tournamentList"></div>
    <button id="addTournamentBtn" class="hidden" onclick="addTournament()">+ Add Tournament</button>
  </section>
</main>

<footer>
  Â© 2025 CampusConnect | Designed with <span>ðŸ’œ</span> by 
  <b>Aryan</b>, <b>Navdeep</b> & <b>Kritika</b> <span>â™¥</span>
</footer>

<script type="module">
  // ====== FIREBASE SETUP ======
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js";
  import { getDatabase, ref, push, onValue, set } from "https://www.gstatic.com/firebasejs/10.13.0/firebase-database.js";

  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
    databaseURL: "https://YOUR_PROJECT_ID-default-rtdb.firebaseio.com",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_PROJECT_ID.appspot.com",
    messagingSenderId: "YOUR_SENDER_ID",
    appId: "YOUR_APP_ID"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  // ====== EXISTING JS LOGIC ======
  let currentRole = '';

  function openMenu() { document.getElementById("sidebar").style.width = "240px"; }
  function closeMenu() { document.getElementById("sidebar").style.width = "0"; }
  function showSection(id) {
    document.querySelectorAll('main section').forEach(sec => sec.classList.add('hidden'));
    document.getElementById(id).classList.remove('hidden');
    closeMenu();
  }

  // LOGIN
  function login() {
    const name = document.getElementById('name').value.trim();
    const role = document.getElementById('role').value;
    if (!name) return alert('Please enter your name');
    currentRole = role;
    document.getElementById('welcomeMsg').innerText = `Welcome ${name}! You are logged in as ${role}.`;
    ['addFacultyBtn','addAlumniBtn','addTournamentBtn'].forEach(id => {
      document.getElementById(id).classList.toggle('hidden', role !== 'admin');
    });
  }

  // ====== CHAT (REAL-TIME) ======
  const chatRef = ref(db, "chat");
  function sendMessage() {
    const msg = document.getElementById('chatInput').value.trim();
    const name = document.getElementById('name').value || 'Guest';
    if (!msg) return;
    push(chatRef, { name, msg, time: Date.now() });
    document.getElementById('chatInput').value = '';
  }
  onValue(chatRef, snapshot => {
    const data = snapshot.val();
    const box = document.getElementById('chatBox');
    box.innerHTML = data ? Object.values(data)
      .map(c => `<div class="chat-message"><b>${c.name}:</b> ${c.msg}</div>`).join('') : '';
    box.scrollTop = box.scrollHeight;
  });

  // ====== ISSUES (REAL-TIME) ======
  const issueRef = ref(db, "issues");
  function addIssue() {
    const issue = document.getElementById('issueText').value.trim();
    if (!issue) return;
    push(issueRef, { issue, time: Date.now() });
    document.getElementById('issueText').value = '';
  }
  onValue(issueRef, snapshot => {
    const data = snapshot.val();
    document.getElementById('issueList').innerHTML = data ?
      Object.values(data).map(i => `<div class="list-item">${i.issue}</div>`).join('') : '';
  });

  // ====== CGPA CALCULATOR (LOCAL) ======
  function addSubject() {
    const div = document.createElement('div');
    div.innerHTML = `
      <input type="number" placeholder="Credits" class="credit">
      <input type="number" placeholder="Grade (0-10)" class="grade">
    `;
    document.getElementById('subjects').appendChild(div);
  }
  function calculateCGPA() {
    const credits = [...document.querySelectorAll('.credit')].map(i => parseFloat(i.value)||0);
    const grades = [...document.querySelectorAll('.grade')].map(i => parseFloat(i.value)||0);
    const totalCredits = credits.reduce((a,b)=>a+b,0);
    const totalPoints = credits.map((c,i)=>c*grades[i]).reduce((a,b)=>a+b,0);
    const cgpa = totalCredits ? (totalPoints/totalCredits).toFixed(2) : 0;
    document.getElementById('cgpaResult').innerText = `Your CGPA is ${cgpa}`;
  }

  // ====== ADMIN DATA (REAL-TIME) ======
  const facultyRef = ref(db, "faculty");
  const alumniRef = ref(db, "alumni");
  const tourRef = ref(db, "tournaments");

  function addFaculty() {
    const name = prompt("Enter Faculty Name:");
    const dept = prompt("Enter Department:");
    if (name && dept) push(facultyRef, { name, dept });
  }
  function addAlumni() {
    const name = prompt("Enter Alumni Name:");
    const year = prompt("Enter Graduation Year:");
    if (name && year) push(alumniRef, { name, year });
  }
  function addTournament() {
    const name = prompt("Enter Tournament Name:");
    const date = prompt("Enter Tournament Date:");
    if (name && date) push(tourRef, { name, date });
  }

  onValue(facultyRef, s => {
    const d = s.val();
    document.getElementById("facultyList").innerHTML = d ?
      Object.values(d).map(f => `<div class='list-item'><b>${f.name}</b> - ${f.dept}</div>`).join('') : '';
  });
  onValue(alumniRef, s => {
    const d = s.val();
    document.getElementById("alumniList").innerHTML = d ?
      Object.values(d).map(a => `<div class='list-item'><b>${a.name}</b> - Class of ${a.year}</div>`).join('') : '';
  });
  onValue(tourRef, s => {
    const d = s.val();
    document.getElementById("tournamentList").innerHTML = d ?
      Object.values(d).map(t => `<div class='list-item'><b>${t.name}</b> - ${t.date}</div>`).join('') : '';
  });

  // Attach functions globally
  window.login = login;
  window.showSection = showSection;
  window.openMenu = openMenu;
  window.closeMenu = closeMenu;
  window.sendMessage = sendMessage;
  window.addIssue = addIssue;
  window.addSubject = addSubject;
  window.calculateCGPA = calculateCGPA;
  window.addFaculty = addFaculty;
  window.addAlumni = addAlumni;
  window.addTournament = addTournament;
</script>
</body>
</html>
