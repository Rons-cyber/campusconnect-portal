<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CampusConnect Portal</title>
<style>
:root {
  --primary: #6A0DAD;
  --secondary: #CBA6F7;
  --accent: #B266FF;
  --bg: #F3E8FF;
  --text-dark: #2E0249;
  --text-light: #F8F4FF;
  --gradient: linear-gradient(135deg, #6A0DAD, #B266FF);
  --border: #E2CFF9;
}
* { box-sizing: border-box; margin: 0; padding: 0; }
body {
  font-family: 'Segoe UI', Roboto, system-ui, sans-serif;
  background: var(--bg);
  color: var(--text-dark);
  transition: margin-left 0.3s ease;
  padding-bottom: 70px;
}
header {
  background: var(--gradient);
  color: var(--text-light);
  text-align: center;
  padding: 2.5rem 1rem 2rem;
  border-bottom-left-radius: 30px;
  border-bottom-right-radius: 30px;
  box-shadow: 0 4px 12px rgba(106, 13, 173, 0.25);
  position: relative;
}
header h1 { margin: 0; font-size: 2.3rem; letter-spacing: 1px; }
header p { margin-top: .5rem; font-size: 1rem; opacity: .9; }
.menu-btn {
  position: absolute;
  top: 15px;
  left: 15px;
  background: white;
  color: var(--primary);
  border: none;
  border-radius: 50%;
  width: 38px;
  height: 38px;
  font-size: 1.3rem;
  font-weight: bold;
  cursor: pointer;
  box-shadow: 0 3px 10px rgba(0,0,0,0.15);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: 0.2s;
}
.menu-btn:hover {
  background: var(--accent);
  color: var(--text-light);
  transform: scale(1.05);
}
.sidebar {
  height: 100%;
  width: 0;
  position: fixed;
  z-index: 10;
  top: 0;
  left: 0;
  background: var(--text-light);
  border-right: 2px solid var(--border);
  overflow-x: hidden;
  transition: 0.3s;
  padding-top: 80px;
  box-shadow: 3px 0 10px rgba(0,0,0,0.1);
}
.sidebar button {
  display: block;
  background: none;
  color: var(--primary);
  border: none;
  padding: 15px 25px;
  text-align: left;
  font-size: 1rem;
  width: 100%;
  cursor: pointer;
  transition: 0.2s;
}
.sidebar button:hover {
  background: var(--gradient);
  color: var(--text-light);
}
.close-btn {
  position: absolute;
  top: 20px;
  right: 25px;
  background: none;
  border: none;
  font-size: 1.8rem;
  color: var(--primary);
  cursor: pointer;
}
main { max-width: 950px; margin: auto; padding: 1rem; }
.card {
  background: white;
  padding: 1.3rem;
  border-radius: 16px;
  margin-bottom: 1.3rem;
  box-shadow: 0 3px 10px rgba(178, 102, 255, 0.15);
  border: 1px solid var(--border);
  transition: all 0.2s;
}
.card:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(106, 13, 173, 0.2);
}
input, select, textarea, button {
  width: 100%; margin-top: 6px; padding: 10px;
  border-radius: 10px; border: 1.5px solid var(--border);
  font-size: 1rem;
  color: var(--text-dark);
}
input:focus, select:focus, textarea:focus {
  border-color: var(--accent);
  outline: none;
  box-shadow: 0 0 4px rgba(178, 102, 255, 0.3);
}
button {
  background: var(--primary);
  color: var(--text-light);
  border: none;
  cursor: pointer;
  font-weight: 600;
  margin-top: 10px;
  transition: background 0.2s;
}
button:hover { background: var(--accent); }
.hidden { display: none; }
h2 {
  color: var(--primary);
  font-size: 1.5rem;
  margin-bottom: .8rem;
}
.list-item {
  border-bottom: 1px solid var(--border);
  padding: 8px 0;
}
.chat-box {
  border: 1.5px solid var(--border);
  border-radius: 10px;
  height: 250px;
  overflow-y: auto;
  background: var(--secondary);
  padding: 8px;
  margin-bottom: 8px;
}
.chat-message { margin-bottom: 6px; }
footer {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  text-align: center;
  padding: 10px 0;
  background: var(--text-light);
  border-top: 2px solid var(--border);
  font-size: .9rem;
  opacity: .9;
  box-shadow: 0 -2px 6px rgba(0,0,0,0.05);
}
footer span { color: var(--accent); }
footer b { color: var(--primary); }
</style>
</head>

<body>
<header>
  <button class="menu-btn" onclick="openMenu()">â˜°</button>
  <h1>CampusConnect Portal</h1>
  <p>Empowering Students, Alumni & Industry</p>
</header>

<div id="sidebar" class="sidebar">
  <button class="close-btn" onclick="closeMenu()">Ã—</button>
  <button onclick="showSection('loginSection')">Login</button>
  <button onclick="showSection('chatSection')">Chat Room</button>
  <button onclick="showSection('issueSection')">Issues</button>
  <button onclick="showSection('cgpaSection')">CGPA Calculator</button>
  <button onclick="showSection('facultySection')">Faculty</button>
  <button onclick="showSection('alumniSection')">Alumni</button>
  <button onclick="showSection('tournamentSection')">Tournaments</button>
</div>

<main>
  <section id="loginSection" class="card">
    <h2>Login / Register</h2>
    <input type="text" id="name" placeholder="Enter your name">
    <select id="role">
      <option value="student">Student</option>
      <option value="alumni">Alumni</option>
      <option value="faculty">Faculty</option>
      <option value="admin">Admin</option>
    </select>
    <button onclick="login()">Continue</button>
    <p id="welcomeMsg"></p>
  </section>

  <section id="chatSection" class="card hidden">
    <h2>Chat Room</h2>
    <div id="chatBox" class="chat-box"></div>
    <input type="text" id="chatInput" placeholder="Type your message...">
    <button onclick="sendMessage()">Send</button>
  </section>

  <section id="issueSection" class="card hidden">
    <h2>Report an Issue</h2>
    <textarea id="issueText" placeholder="Describe your issue..."></textarea>
    <button onclick="addIssue()">Submit Issue</button>
    <h3 style="margin-top:1rem;">Submitted Issues</h3>
    <div id="issueList"></div>
  </section>

  <section id="cgpaSection" class="card hidden">
    <h2>CGPA Calculator</h2>
    <div id="subjects"></div>
    <button onclick="addSubject()">+ Add Subject</button>
    <button onclick="calculateCGPA()">Calculate CGPA</button>
    <p id="cgpaResult"></p>
  </section>

  <section id="facultySection" class="card hidden">
    <h2>Faculty Directory</h2>
    <div id="facultyList"></div>
    <button id="addFacultyBtn" class="hidden" onclick="addFaculty()">+ Add Faculty</button>
  </section>

  <section id="alumniSection" class="card hidden">
    <h2>Alumni Directory</h2>
    <div id="alumniList"></div>
    <button id="addAlumniBtn" class="hidden" onclick="addAlumni()">+ Add Alumni</button>
  </section>

  <section id="tournamentSection" class="card hidden">
    <h2>Tournaments</h2>
    <div id="tournamentList"></div>
    <button id="addTournamentBtn" class="hidden" onclick="addTournament()">+ Add Tournament</button>
  </section>
</main>

<footer>
  Â© 2025 CampusConnect | Designed with <span>ðŸ’œ</span> by 
  <b>Aryan</b>, <b>Navdeep</b> & <b>Kritika</b> <span>â™¥</span>
</footer>

<script>
let currentRole = '';
let chatMessages = JSON.parse(localStorage.getItem('chatMessages')) || [];
let issues = JSON.parse(localStorage.getItem('issues')) || [];

function openMenu() { document.getElementById("sidebar").style.width = "240px"; }
function closeMenu() { document.getElementById("sidebar").style.width = "0"; }
function showSection(id) {
  document.querySelectorAll('main section').forEach(sec => sec.classList.add('hidden'));
  document.getElementById(id).classList.remove('hidden');
  closeMenu();
}

// Restore session if exists
window.onload = () => {
  const savedName = localStorage.getItem('name');
  const savedRole = localStorage.getItem('role');
  if (savedName && savedRole) {
    currentRole = savedRole;
    document.getElementById('name').value = savedName;
    document.getElementById('role').value = savedRole;
    document.getElementById('welcomeMsg').innerText = `Welcome ${savedName}! You are logged in as ${savedRole}.`;
    toggleAdminButtons(savedRole);
  }
  renderChat();
  renderIssues();
  document.getElementById("facultyList").innerHTML = localStorage.getItem("facultyList") || "";
  document.getElementById("alumniList").innerHTML = localStorage.getItem("alumniList") || "";
  document.getElementById("tournamentList").innerHTML = localStorage.getItem("tournamentList") || "";
};

// Login
function login() {
  const name = document.getElementById('name').value.trim();
  const role = document.getElementById('role').value;
  if (!name) return alert('Please enter your name');
  currentRole = role;
  document.getElementById('welcomeMsg').innerText = `Welcome ${name}! You are logged in as ${role}.`;

  localStorage.setItem('name', name);
  localStorage.setItem('role', role);

  toggleAdminButtons(role);
}

function toggleAdminButtons(role) {
  ['addFacultyBtn','addAlumniBtn','addTournamentBtn'].forEach(id => {
    document.getElementById(id).classList.toggle('hidden', role !== 'admin');
  });
}

// Chat
function sendMessage() {
  const msg = document.getElementById('chatInput').value.trim();
  if (!msg) return;
  const name = localStorage.getItem('name') || 'Guest';
  chatMessages.push({name, msg});
  localStorage.setItem('chatMessages', JSON.stringify(chatMessages));
  document.getElementById('chatInput').value = '';
  renderChat();
}
function renderChat() {
  const box = document.getElementById('chatBox');
  box.innerHTML = chatMessages.map(c => `<div class="chat-message"><b>${c.name}:</b> ${c.msg}</div>`).join('');
  box.scrollTop = box.scrollHeight;
}

// Issues
function addIssue() {
  const issue = document.getElementById('issueText').value.trim();
  if (!issue) return;
  issues.push(issue);
  localStorage.setItem('issues', JSON.stringify(issues));
  document.getElementById('issueText').value = '';
  renderIssues();
}
function renderIssues() {
  document.getElementById('issueList').innerHTML = issues.map(i => `<div class="list-item">${i}</div>`).join('');
}

// CGPA
function addSubject() {
  const div = document.createElement('div');
  div.innerHTML = `
    <input type="number" placeholder="Credits" class="credit">
    <input type="number" placeholder="Grade (0-10)" class="grade">
  `;
  document.getElementById('subjects').appendChild(div);
}
function calculateCGPA() {
  const credits = [...document.querySelectorAll('.credit')].map(i => parseFloat(i.value)||0);
  const grades = [...document.querySelectorAll('.grade')].map(i => parseFloat(i.value)||0);
  const totalCredits = credits.reduce((a,b)=>a+b,0);
  const totalPoints = credits.map((c,i)=>c*grades[i]).reduce((a,b)=>a+b,0);
  const cgpa = totalCredits ? (totalPoints/totalCredits).toFixed(2) : 0;
  document.getElementById('cgpaResult').innerText = `Your CGPA is ${cgpa}`;
}

// Admin-only additions (with storage)
function addFaculty() {
  const name = prompt("Enter Faculty Name:");
  const dept = prompt("Enter Department:");
  if (name && dept) {
    const item = `<div class='list-item'><b>${name}</b> - ${dept}</div>`;
    document.getElementById("facultyList").innerHTML += item;
    localStorage.setItem("facultyList", document.getElementById("facultyList").innerHTML);
  }
}
function addAlumni() {
  const name = prompt("Enter Alumni Name:");
  const year = prompt("Enter Graduation Year:");
  if (name && year) {
    const item = `<div class='list-item'><b>${name}</b> - Class of ${year}</div>`;
    document.getElementById("alumniList").innerHTML += item;
    localStorage.setItem("alumniList", document.getElementById("alumniList").innerHTML);
  }
}
function addTournament() {
  const name = prompt("Enter Tournament Name:");
  const date = prompt("Enter Tournament Date:");
  if (name && date) {
    const item = `<div class='list-item'><b>${name}</b> - ${date}</div>`;
    document.getElementById("tournamentList").innerHTML += item;
    localStorage.setItem("tournamentList", document.getElementById("tournamentList").innerHTML);
  }
}
</script>
</body>
</html>
